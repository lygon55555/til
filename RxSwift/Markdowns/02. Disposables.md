# ğŸ§¹
# 02. Disposables

```swift
// 3ê°œì˜ ì •ìˆ˜ë¥¼ ë°©ì¶œí•˜ëŠ” Observable
Observable.from([1, 2, 3])
    .subscribe(onNext: { elem in
        // ì´ë²¤íŠ¸ì˜ ì´ë¦„ê³¼ í¬í•¨ëœ ìš”ì†Œë¥¼ ì¶œë ¥
        print("Next", elem)
    }, onError: { error in
        print("Error", error)
    }, onCompleted: {
        print("Completed")
    }, onDisposed: {
        // íŒŒë¼ë¯¸í„°ë¡œ í´ë¡œì €ë¥¼ ì „ë‹¬í•˜ë©´ Observableê³¼ ê´€ë ¨ëœ ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ì œê±°ëœ í›„ì— í˜¸ì¶œë¨
        // ë¦¬ì†ŒìŠ¤ê°€ í•´ì œë˜ëŠ” ì‹œì ì— ì–´ë–¤ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´ ì—¬ê¸°ì— ì¶”ê°€í•˜ë©´ ë¨
        print("Disposed")
    })
// ì¶œë ¥ ê²°ê³¼
//Next 1
//Next 2
//Next 3
//Completed
//Disposed
```

- `Disposed`ëŠ” Observableì´ ì „ë‹¬í•˜ëŠ” ì´ë²¤íŠ¸ê°€ ì•„ë‹˜

<br/>

```swift
Observable.from([1, 2, 3])
    .subscribe {
        print($0)
    }
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(2)
//next(3)
//completed
```

- Observableì´ `completed ì´ë²¤íŠ¸ë‚˜ error ì´ë²¤íŠ¸ë¡œ ì¢…ë£Œë˜ì—ˆë‹¤ë©´ ê´€ë ¨ëœ ë¦¬ì†ŒìŠ¤ê°€ ìë™ìœ¼ë¡œ í•´ì œ`ë¨
- í•˜ì§€ë§Œ RxSwift ê³µì‹ ë¬¸ì„œì—ëŠ” ìœ„ ê²½ìš°ì—ë„ ì§ì ‘ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ë¼ê³  ë‚˜ì™€ìˆìŒ

<br/>

Subscribe ë©”ì†Œë“œëŠ” `Disposable íƒ€ì…ì„ ë¦¬í„´`í•¨ â†’ `Subscription Disposable`ì´ë¼ê³ ë„ í•¨  
Subscription Disposableì€ í¬ê²Œ `ë¦¬ì†ŒìŠ¤ í•´ì œ`ì™€ `ì‹¤í–‰ ì·¨ì†Œ`ì— ì‚¬ìš©ë¨

# ë¦¬ì†ŒìŠ¤ í•´ì œ

```swift
let subscription1 = Observable.from([1, 2, 3])
    .subscribe(onNext: { elem in
        print("Next", elem)
    }, onError: { error in
        print("Error", error)
    }, onCompleted: {
        print("Completed")
    }, onDisposed: {
        print("Disposed")
    })

subscription1.dispose()
// ì¶œë ¥ ê²°ê³¼
//Next 1
//Next 2
//Next 3
//Completed
//Disposed
```

- ê³µì‹ ë¬¸ì„œì—ì„œëŠ” dispose()ë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ê²ƒë³´ë‹¤ëŠ” `DisposeBagì„ ì‚¬ìš©í•˜ë¼`ê³  ë‚˜ì™€ìˆìŒ

<br/>

```swift
var bag = DisposeBag()

Observable.from([1, 2, 3])
    .subscribe {
        print($0)
    }
    .disposed(by: bag)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(2)
//next(3)
//completed
```

- disposed(by:)ì˜ íŒŒë¼ë¯¸í„°ë¡œ DisposeBagì„ ì „ë‹¬í•˜ë©´ `subscribeê°€ ë¦¬í„´í•˜ëŠ” Disposableì´ DisposeBagì— ì¶”ê°€`ë¨
- `DisposeBagì— ì¶”ê°€ëœ Disposableì€ DisposeBagì´ í•´ì œë˜ëŠ” ì‹œì ì— í•¨ê»˜ í•´ì œë¨`
- ARCì˜ `Auto Releasepool`ê³¼ ë¹„ìŠ·í•œ ê°œë…

<br/>

```swift
var bag = DisposeBag()

~~~~

bag = DisposeBag()
```

DisposeBagì„ ì›í•˜ëŠ” ì‹œì ì— í•´ì œí•˜ê³  ì‹¶ìœ¼ë©´?

- DisposeBagì€ dispose() ì™€ ê°™ì€ ë©”ì†Œë“œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ
- ìƒˆë¡œìš´ DisposeBagì„ ë§Œë“¤ë©´ ì´ì „ì— ìˆë˜ DisposeBagì´ í•´ì œë¨
- ì•„ë‹ˆë©´ ë³€ìˆ˜ë¥¼ ì˜µì…”ë„ë¡œ ì„ ì–¸í•˜ê³  nilì„ í• ë‹¹

ê²°ë¡  : ë¦¬ì†ŒìŠ¤ë¥¼ í•´ì œí•  ë•ŒëŠ” `DisposeBagì„ ì‚¬ìš©`í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²Œ ì¢‹ìŒ

# ì‹¤í–‰ ì·¨ì†Œ

```swift
let subscription2 = Observable<Int>.interval(.seconds(1),
                                             scheduler: MainScheduler.instance)
    .subscribe(onNext: { elem in
        print("Next", elem)
    }, onError: { error in
        print("Error", error)
    }, onCompleted: {
        print("Completed")
    }, onDisposed: {
        print("Disposed")
    })

// 3ì´ˆ ë’¤ì— ë©ˆì¶”ê²Œ í•˜ê¸°
DispatchQueue.main.asyncAfter(deadline: .now() + 3) {
    subscription2.dispose()
}
// ì¶œë ¥ ê²°ê³¼
//Next 0
//Next 1
//Next 2
//Disposed
```

1ì”© ì¦ê°€í•˜ëŠ” ì •ìˆ˜ë¥¼ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ ë¬´í•œì • ë°©ì¶œí•˜ëŠ” Observable â†’ ë°©ì¶œì„ ì¤‘ë‹¨ì‹œí‚¬ ìˆ˜ë‹¨ì´ í•„ìš” â†’ `dispose() ë©”ì†Œë“œ`  
- dispose() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì¦‰ì‹œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ í•´ì œë˜ê¸° ë•Œë¬¸ì— ë” ì´ìƒ ì´ë²¤íŠ¸ê°€ ì „ë‹¬ë˜ì§€ ì•ŠìŒ
- ê·¸ë˜ì„œ Next ë‹¤ìŒì— Completed ì´ë²¤íŠ¸ëŠ” ì „ë‹¬ë˜ì§€ ì•ŠìŒ
- ì´ëŸ° ì´ìœ ë¡œ `dispose() ë©”ì†Œë“œë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ê°€ëŠ¥í•œ í”¼í•´ì•¼ ë¨`
- ë§Œì•½ `íŠ¹ì • ì‹œì ì— ì‹¤í–‰ì„ ì·¨ì†Œí•´ì•¼ í•œë‹¤ë©´ takeUntil` ê°™ì€ ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„
