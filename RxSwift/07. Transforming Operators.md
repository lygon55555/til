# ğŸ’±
# 07. Transforming Operators

|ì—°ì‚°ì|ì„¤ëª…|
|:---|:---|
|[toArray](#toArray)|Observableì´ ë°©ì¶œí•˜ëŠ” `ëª¨ë“  ìš”ì†Œë¥¼ ë°°ì—´ì—` ë‹´ì€ ë‹¤ìŒ ì´ ë°°ì—´ì„ ë°©ì¶œí•˜ëŠ” Observableì„ ìƒì„±|
|[map](#map)|`Observableì´ ë°°ì¶œí•˜ëŠ” í•­ëª©ì„ ëŒ€ìƒìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰` í›„ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°©ì¶œí•˜ëŠ” Observableì„ ë¦¬í„´í•¨|
|[flatMap](#flatMap)|Observable ì‹œí€€ìŠ¤ì˜ elementë‹¹ `í•œ ê°œì˜ ìƒˆë¡œìš´ Observable ì‹œí€€ìŠ¤`ë¥¼ ìƒì„±í•œë‹¤.  
ì´ë ‡ê²Œ ìƒì„±ëœ `ì—¬ëŸ¬ ê°œì˜ ìƒˆë¡œìš´ ì‹œí€€ìŠ¤ë¥¼ í•˜ë‚˜ì˜ ì‹œí€€ìŠ¤ë¡œ í•©ì¹¨`|
|[flatMapFirst](#flatMapFirst)|`ì²« ë²ˆì§¸ë¡œ ë³€í™˜ëœ Observable`ì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ë§Œ êµ¬ë…ìë¡œ ì „ë‹¬í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ë¬´ì‹œí•¨|
|[flatMapLatest](#flatMapLatest)|`ê°€ì¥ ìµœê·¼ì— í•­ëª©ì„ ë°©ì¶œí•œ Observable`ì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ëŠ” ëª¨ë‘ ë¬´ì‹œ|
|[scan](#scan)|ê¸°ë³¸ê°’ì´ë‚˜ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ ëŒ€ìƒìœ¼ë¡œ `Accumulator Closure`ë¥¼ ì‹¤í–‰í•œ ë‹¤ìŒ ê²°ê³¼ë¥¼ Observableë¡œ ë¦¬í„´í•¨|
|[buffer](#buffer)|íŠ¹ì • ì£¼ê¸° ë™ì•ˆ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ ìˆ˜ì§‘í•˜ê³  í•˜ë‚˜ì˜ `ë°°ì—´`ë¡œ ë¦¬í„´í•¨|
|[window](#window)|íŠ¹ì • ì£¼ê¸° ë™ì•ˆ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ ìˆ˜ì§‘í•˜ê³  `ìˆ˜ì§‘ëœ í•­ëª©ì„ ë°©ì¶œí•˜ëŠ” Observable`ì„ ë¦¬í„´í•¨|
|[groupBy](#groupBy)|Observableì´ ë°©ì¶œí•˜ëŠ” ìš”ì†Œë¥¼ `ì›í•˜ëŠ” ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¨í•‘`í•  ë•Œ ì‚¬ìš©í•¨|

# toArray<a id="toArray"></a>

- Observableì´ ë°©ì¶œí•˜ëŠ” `ëª¨ë“  ìš”ì†Œë¥¼ ë°°ì—´ì—` ë‹´ì€ ë‹¤ìŒ ì´ ë°°ì—´ì„ ë°©ì¶œí•˜ëŠ” Observableì„ ìƒì„±

```swift
func toArray() -> Single<[Element]>
```

- ë³„ë„ì˜ íŒŒë¼ë¯¸í„°ëŠ” ë°›ì§€ ì•ŠìŒ
- í•˜ë‚˜ì˜ ìš”ì†Œë¥¼ ë°©ì¶œí•˜ê±°ë‚˜ error ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬í•˜ëŠ” Observableì¸ `Single`ë¡œ ë¦¬í„´í•¨
- toArray ì—°ì‚°ìê°€ `ë¦¬í„´í•˜ëŠ” Observableì€ í•˜ë‚˜ì˜ ìš”ì†Œë¥¼ ë°©ì¶œí•œ ë‹¤ìŒ ë°”ë¡œ ì¢…ë£Œí•¨`

<br/>

```swift
let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

let subject = PublishSubject<Int>()
subject
    .toArray()
    .subscribe { print($0) }
    .disposed(by: disposeBag)

subject.onNext(1)
```

- ì¶œë ¥ ê²°ê³¼ ì—†ìŒ â†’ ë°©ì¶œí•œ ìˆ«ìê°€ êµ¬ë…ìì—ê²Œ ì „ë‹¬ë˜ì§€ ì•ŠìŒ
- toArray ì—°ì‚°ìëŠ” ì†ŒìŠ¤ Observableì´ ë°©ì¶œí•˜ëŠ” ëª¨ë“  ìš”ì†Œë¥¼ í•˜ë‚˜ì˜ ë°°ì—´ì— ë‹´ìŒ
- `ì†ŒìŠ¤ Observableì´ ë” ì´ìƒ ìš”ì†Œë¥¼ ë°©ì¶œí•˜ì§€ ì•ŠëŠ” ì‹œì ì´ ë˜ì–´ì•¼ ëª¨ë“  ìš”ì†Œë¥¼ ë°°ì—´ì— ë‹´ì„ ìˆ˜ ìˆìŒ`  
â†’ ê·¸ë˜ì„œ ì†ŒìŠ¤ Observableì´ ì¢…ë£Œí•˜ê¸° ì „ê¹Œì§€ êµ¬ë…ìë¡œ ì „ë‹¬ë˜ì§€ ì•ŠìŒ

<br/>

```swift
subject.onNext(2)
subject.onCompleted()
// ì¶œë ¥ ê²°ê³¼
//success([1, 2])
```

- `completed ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬`í•˜ë©´ ì§€ê¸ˆê¹Œì§€ ë°©ì¶œí•œ ìš”ì†Œë¥¼ ë‹´ì€ í•˜ë‚˜ì˜ ë°°ì—´ì´ êµ¬ë…ìì—ê²Œ ì „ë‹¬ë¨

# map<a id="map"></a>

- `Observableì´ ë°°ì¶œí•˜ëŠ” í•­ëª©ì„ ëŒ€ìƒìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰` í›„ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°©ì¶œí•˜ëŠ” Observableì„ ë¦¬í„´í•¨
- í´ë¡œì €ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ

ì´ë¦„ ì•ì— Helloë¥¼ ë¶™ì—¬ì„œ ë¦¬í„´í•˜ëŠ” ì½”ë“œ

```swift
Observable.from(skills)
    .map { "Hello, \($0)" }
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next(Hello, Swift)
//next(Hello, SwiftUI)
//next(Hello, RxSwift)
//completed
```

- map ì—°ì‚°ìë¥¼ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ íŒŒë¼ë¯¸í„°ì™€ ë™ì¼í•œ í˜•ì‹ì„ ë¦¬í„´í•´ì•¼ ëœë‹¤ê³  ìƒê°í•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ â†’ í•˜ì§€ë§Œ ê·¸ëŸ° ì œì•½ì€ ì—†ìŒ
- ê·¸ë˜ì„œ ë¬¸ìì—´ì„ ë°›ì•„ì„œ ì •ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ” ì•„ë˜ ì½”ë“œë„ ê°€ëŠ¥í•¨

```swift
Observable.from(skills)
    .map { $0.count }
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next(5)
//next(7)
//next(7)
//completed
```

- map ì—°ì‚°ìëŠ” `Observableì´ ë°©ì¶œí•˜ëŠ” ìš”ì†Œë¥¼ ëŒ€ìƒìœ¼ë¡œ í´ë¡œì €ë¥¼ ì‹¤í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ êµ¬ë…ìì—ê²Œ ì „ë‹¬í•¨`
- í´ë¡œì €ë¡œ ì „ë‹¬í•˜ëŠ” íŒŒë¼ë¯¸í„°ì˜ í˜•ì‹ì€ ì†ŒìŠ¤ Observableì´ ë°©ì¶œí•˜ëŠ” ìš”ì†Œì™€ ë™ì¼í•¨
- í•˜ì§€ë§Œ í´ë¡œì €ê°€ ë¦¬í„´í•˜ëŠ” ê°’ì˜ í˜•ì‹ì€ ê³ ì •ë˜ì–´ ìˆì§€ ì•ŠìŒ â†’ ì–¼ë§ˆë“ ì§€ ì›í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ ë¦¬í„´í•  ìˆ˜ ìˆìŒ

# flatMap<a id="flatMap"></a>

- ì›ë³¸ Observableì´ í•­ëª©ì„ ë°©ì¶œí•˜ë©´ flatMap ì—°ì‚°ìê°€ ë³€í™˜ í•¨ìˆ˜ë¥¼ ì‹¤í–‰
- ë³€í™˜ í•¨ìˆ˜ëŠ” ë°©ì¶œëœ í•­ëª©ì„ Observableë¡œ ë³€í™˜í•¨
- ë°©ì¶œëœ í•­ëª©ì˜ ê°’ì´ ë°”ë€Œë©´ flatMap ì—°ì‚°ìê°€ ë³€í™˜í•œ Observableì´ ìƒˆë¡œìš´ í•­ëª©ì„ ë°©ì¶œí•¨  
â†’ ì´ëŸ° íŠ¹ì§• ë•Œë¬¸ì— `ì›ë³¸ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ ì§€ì†ì ìœ¼ë¡œ ê°ì‹œí•˜ê³  ìµœì‹  ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ`
- flatMapì€ `ëª¨ë“  Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ ëª¨ì•„ì„œ ìµœì¢…ì ìœ¼ë¡œ í•˜ë‚˜ì˜ Observableì„ ë¦¬í„´í•¨`
- ê°œë³„ í•­ëª©ì´ ê°œë³„ Observableë¡œ ë³€í™˜ë˜ì—ˆë‹¤ê°€ ë‹¤ì‹œ í•˜ë‚˜ì˜ Observableë¡œ í•©ì³ì§€ê¸° ë•Œë¬¸ì— ì²˜ìŒì— ì´í•´í•˜ê¸° ì–´ë ¤ì›€ â†’ ì‹¤ì œ ì‚¬ìš©í•´ë´ì•¼ ì´í•´í•˜ê¸° ì‰¬ì›€
- í´ë¡œì €ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ìŒ

<br/>

```swift
let a = BehaviorSubject(value: 1)
let b = BehaviorSubject(value: 2)

// BehaviorSubjectë¥¼ ë°©ì¶œí•˜ëŠ” PublishSubject ìƒì„±
let subject = PublishSubject<BehaviorSubject<Int>>()

// BehaviorSubjectë¥¼ ì›í•˜ëŠ”ëŒ€ë¡œ ë³€í™˜í•œ ë‹¤ìŒ ìƒˆë¡œìš´ Observableì„ ë¦¬í„´í•´ì•¼í•¨
// ì—¬ê¸°ì—ì„œëŠ” ë³„ë‹¤ë¥¸ ë³€í™˜ ì—†ì´ Subjectë¥¼ Observableë¡œ ë°”ê¿”ì„œ ê·¸ëŒ€ë¡œ ë¦¬í„´í•˜ê² ìŒ
// asObservable ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ Subjectë¥¼ Observableë¡œ ë°”ê¿€ ìˆ˜ ìˆìŒ
subject
    .flatMap { $0.asObservable() }
    .subscribe { print($0) }
    .disposed(by: disposeBag)

subject.onNext(a)
// ì¶œë ¥ ê²°ê³¼
//next(1)
```

- `asObservable ë©”ì†Œë“œ`ë¥¼ ì‚¬ìš©í•˜ë©´ Subjectë¥¼ Observableë¡œ ë°”ê¿€ ìˆ˜ ìˆìŒ
- PublishSubjectì—ì„œ aë¥¼ ë°©ì¶œí•˜ë©´ flatMapì„ ê±°ì³ì„œ ìƒˆë¡œìš´ Observableì´ ìƒì„±ë¨ â†’ ê·¸ë¦¬ê³  ì´ Observableì€ 1ì„ ë°©ì¶œí•¨

<br/>

```swift
subject
    .flatMap { $0.asObservable() }
    .subscribe { print($0) }
    .disposed(by: disposeBag)

subject.onNext(a)
subject.onNext(b)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(2)
```

- bë¥¼ ë°©ì¶œí•˜ë©´ ë§ˆì°¬ê°€ì§€ë¡œ flatMapì„ ê±°ì³ì„œ ìƒˆë¡œìš´ Observableì´ ìƒì„±ë¨  
â†’ ê·¸ë¦¬ê³  ì´ Observableì€ ìµœì¢…ì ìœ¼ë¡œ ì•ì—ì„œ ìƒì„±ëœ Observableê³¼ í•©ì³ì§  
â†’ bì˜ í˜„ì¬ê°’ì¸ 2ê°€ ë°©ì¶œë¨
- `flatMapì´ ë‚´ë¶€ì ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ Observableì„ ìƒì„±í•˜ì§€ë§Œ ìµœì¢…ì ìœ¼ë¡œ ëª¨ë“  Observableì´ í•˜ë‚˜ì˜ Observableë¡œ í•©ì³ì§€ê³  ë°©ì¶œë˜ëŠ” í•­ëª©ë“¤ì´ ìˆœì„œëŒ€ë¡œ êµ¬ë…ìì—ê²Œ ì „ë‹¬ë¨`

<br/>

```swift
subject
    .flatMap { $0.asObservable() }
    .subscribe { print($0) }
    .disposed(by: disposeBag)

subject.onNext(a)
subject.onNext(b)

a.onNext(11)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(2)
//next(11)
```

- aì—ì„œ ìƒˆë¡œìš´ í•­ëª©ì„ ë°©ì¶œí•˜ë©´ êµ¬ë…ìë¡œ ìƒˆë¡œìš´ í•­ëª©ì´ ì „ë‹¬ë¨

<br/>

```swift
subject
    .flatMap { $0.asObservable() }
    .subscribe { print($0) }
    .disposed(by: disposeBag)

subject.onNext(a)
subject.onNext(b)

a.onNext(11)

b.onNext(22)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(2)
//next(11)
//next(22)
```

- bì—ì„œ ìƒˆë¡œìš´ í•­ëª©ì„ ë°©ì¶œí•´ë„ ë§ˆì°¬ê°€ì§€ë¡œ ìƒˆë¡œìš´ í•­ëª©ì´ êµ¬ë…ìì—ê²Œ ì „ë‹¬ë¨

### ì •ë¦¬

- flatMap ì—°ì‚°ìëŠ” ì›ë³¸ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ ìƒˆë¡œìš´ Observableë¡œ ë³€í™˜í•¨
- ìƒˆë¡œìš´ Observableì€ í•­ëª©ì´ ì—…ë°ì´íŠ¸ ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ í•­ëª©ì„ ë°©ì¶œí•¨
- ì´ë ‡ê²Œ ìƒì„±ëœ Observableì€ ìµœì¢…ì ìœ¼ë¡œ í•˜ë‚˜ì˜ Observableë¡œ í•©ì³ì§€ê³  ëª¨ë“  í•­ëª©ë“¤ì´ ì´ Observableì„ í†µí•´ì„œ êµ¬ë…ìë¡œ ì „ë‹¬ë¨
- ë‹¨ìˆœíˆ ì²˜ìŒì— ë°©ì¶œëœ í•­ëª©ë§Œ êµ¬ë…ìë¡œ ì „ë‹¬ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—…ë°ì´íŠ¸ëœ ìµœì‹  í•­ëª©ë„ êµ¬ë…ìë¡œ ì „ë‹¬ë¨
- ì´ ì—°ì‚°ìëŠ” `ë„¤íŠ¸ì›Œí¬ ìš”ì²­`ì„ êµ¬í˜„í•  ë•Œ ìì£¼ í™œìš©í—˜

# flatMapFirst<a id="flatMapFirst"></a>

`flatMap ì—°ì‚°ì`ëŠ” ì›ë³¸ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ Observableë¡œ ë³€í™˜í•˜ê³  ë³€í™˜ëœ Observableì´ ë°©ì¶œí•˜ëŠ” ëª¨ë“  í•­ëª©ì„ í•˜ë‚˜ë¡œ ëª¨ì•„ì„œ ë‹¨ì¼ Observableì„ ë¦¬í„´

```swift
let a = BehaviorSubject(value: 1)
let b = BehaviorSubject(value: 2)

let subject = PublishSubject<BehaviorSubject<Int>>()

subject
   .flatMap { $0.asObservable() }
   .subscribe { print($0) }
   .disposed(by: disposeBag)

subject.onNext(a)
subject.onNext(b)

a.onNext(11)
b.onNext(22)
b.onNext(222)
a.onNext(111)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(2)
//next(11)
//next(22)
//next(222)
//next(111)
```

- ê²°ê³¼ë¥¼ ë³´ë©´ a, b ë‘ Subjectê°€ ë°©ì¶œí•˜ëŠ” ëª¨ë“  í•­ëª©ì´ êµ¬ë…ìë¡œ ì „ë‹¬ë¨

<br/>

- `flatMapFirst ì—°ì‚°ì`ì˜ íŒŒë¼ë¯¸í„°ì™€ ë¦¬í„´í˜•ì€ flatMapê³¼ ë™ì¼í•¨
- í•˜ì§€ë§Œ `ì—°ì‚°ìê°€ ë¦¬í„´í•˜ëŠ” Observableì—ëŠ” ì²˜ìŒì— ë³€í™˜ëœ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ë§Œ í¬í•¨ë¨`

```swift
let a = BehaviorSubject(value: 1)
let b = BehaviorSubject(value: 2)

let subject = PublishSubject<BehaviorSubject<Int>>()

subject
   .flatMapFirst { $0.asObservable() }
   .subscribe { print($0) }
   .disposed(by: disposeBag)

subject.onNext(a)
// ì¶œë ¥ ê²°ê³¼
//next(1)
```

- PublishSubjectê°€ aì— ì €ì¥ëœ BehaviorSubjectë¥¼ ë°©ì¶œí•¨
- flatMapFirstëŠ” aê°€ ë°©ì¶œí•˜ëŠ” ìš”ì†Œë¥¼ ìƒˆë¡œìš´ Observableë¡œ ë³€í™˜í•¨
- ê·¸ë¦¬ê³  aì— ì €ì¥ëœ ì´ˆê¹ƒê°’ 1ì´ êµ¬ë…ìì—ê²Œ ì „ë‹¬ë¨

<br/>

```swift
subject.onNext(a)
subject.onNext(b)
// ì¶œë ¥ ê²°ê³¼
//next(1)
```

- flatMap ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” bê°€ ë°©ì¶œí•˜ëŠ” í•­ëª© ì—­ì‹œ êµ¬ë…ìì—ê²Œ ì „ë‹¬ë˜ì§€ë§Œ flatMapFirstì—ì„œëŠ” ê·¸ë ‡ì§€ ì•ŠìŒ
- flatMapFirstëŠ” `ì²« ë²ˆì§¸ë¡œ ë³€í™˜ëœ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ë§Œ êµ¬ë…ìë¡œ ì „ë‹¬í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ë¬´ì‹œí•¨`

<br/>

```swift
subject.onNext(a)
subject.onNext(b)

a.onNext(11)

b.onNext(22)
b.onNext(222)

a.onNext(111)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(11)
//next(111)
```

- aê°€ ë°©ì¶œí•˜ëŠ” 11, 111ì€ êµ¬ë…ìë¡œ ì „ë‹¬ë¨
- í•˜ì§€ë§Œ bê°€ ë°©ì¶œí•˜ëŠ” ìš”ì†Œë“¤ì€ ë¬´ì‹œë˜ê³  êµ¬ë…ìë¡œ ì „ë‹¬ë˜ì§€ ì•ŠìŒ

# flatMapLatest<a id="flatMapLatest"></a>

- ì›ë³¸ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ Observableë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì€ ë™ì¼
- ë°˜ë©´ ëª¨ë“  Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ í•˜ë‚˜ë¡œ ë³‘í•©í•˜ì§€ ì•ŠìŒ
- ëŒ€ì‹  `ê°€ì¥ ìµœê·¼ì— í•­ëª©ì„ ë°©ì¶œí•œ Observableì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ëŠ” ëª¨ë‘ ë¬´ì‹œ`

<br/>

```swift
let a = BehaviorSubject(value: 1)
let b = BehaviorSubject(value: 2)

let subject = PublishSubject<BehaviorSubject<Int>>()

subject
   .flatMapLatest { $0.asObservable() }
   .subscribe { print($0) }
   .disposed(by: disposeBag)

subject.onNext(a)
// ì¶œë ¥ ê²°ê³¼
//next(1)
```

- ìœ„ ì½”ë“œì—ì„œ ê°€ì¥ ìµœê·¼ì— í•­ëª©ì„ ë°©ì¶œí•œ Observableì€ aì„
- ê·¸ë˜ì„œ aê°€ ë°©ì¶œí•˜ëŠ” ëª¨ë“  í•­ëª©ì´ êµ¬ë…ìë¡œ ì „ë‹¬ë¨

<br/>

```swift
subject.onNext(a)

a.onNext(11)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(11)
```

- aì—ì„œ ìƒˆë¡œìš´ í•­ëª©ì„ ë°©ì¶œí•˜ë©´ êµ¬ë…ìë¡œ ì „ë‹¬ë¨

<br/>

```swift
subject.onNext(a)
a.onNext(11)

subject.onNext(b)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(11)
//next(2)
```

- ì´ë•Œë¶€í„° `aê°€ ë°©ì¶œí•˜ëŠ” í•­ëª©ì€ ë¬´ì‹œí•˜ê³  bê°€ ë°©ì¶œí•˜ëŠ” í•­ëª©ë§Œ ì „ë‹¬í•¨`

<br/>

```swift
subject.onNext(a)
a.onNext(11)

subject.onNext(b)
b.onNext(22)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(11)
//next(2)
//next(22)
```

- ê·¸ë˜ì„œ bê°€ ë°©ì¶œí•˜ëŠ” í•­ëª©ì€ êµ¬ë…ìì—ê²Œ ì „ë‹¬ë¨

<br/>

```swift
subject.onNext(a)
a.onNext(11)

subject.onNext(b)
b.onNext(22)

a.onNext(11)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(11)
//next(2)
//next(22)
```

- `aê°€ ë°©ì¶œí•˜ëŠ” í•­ëª©ì€ ë” ì´ìƒ êµ¬ë…ìì—ê²Œ ì „ë‹¬ë˜ì§€ ì•ŠìŒ`
- flatMapLatestëŠ” ì›ë³¸ Observableì´ ë°©ì¶œí•˜ëŠ” ìš”ì†Œë¥¼ ìƒˆë¡œìš´ Observableë¡œ ë³€í™˜í•˜ê³  `ê°€ì¥ ìµœê·¼ì— ë³€í™˜ëœ Observableì´ ë°©ì¶œí•˜ëŠ” ìš”ì†Œë§Œ êµ¬ë…ìì—ê²Œ ì „ë‹¬í•¨`

<br/>

PublishSubjectì—ì„œ ë‹¤ì‹œ aë¥¼ ë°©ì¶œí•˜ë©´?

```swift
subject.onNext(a)
a.onNext(11)

subject.onNext(b)
b.onNext(22)

a.onNext(11)

subject.onNext(a)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(11)
//next(2)
//next(22)
//next(11)
```

- ì´ì „ì— aì—ì„œ ë°©ì¶œí–ˆë˜ 11ì´ êµ¬ë…ìë¡œ ì „ë‹¬ë¨
- ì›ë³¸ Observableì´ ë°©ì¶œí•˜ëŠ” subjectì˜ ì¢…ë¥˜(`BehaviorSubject`)ë¥¼ ìƒê°í•´ë³´ë©´ ìœ„ ê²°ê³¼ì˜ ì´ìœ ë¥¼ ì•Œ ìˆ˜ ìˆìŒ

<br/>

```swift
subject.onNext(a)
a.onNext(11)

subject.onNext(b)
b.onNext(22)

a.onNext(11)
subject.onNext(a)

b.onNext(222)
a.onNext(111)
// ì¶œë ¥ ê²°ê³¼
//next(1)
//next(11)
//next(2)
//next(22)
//next(11)
//next(111)
```

- aê°€ ë°©ì¶œí•˜ëŠ” í•­ëª©ì´ êµ¬ë…ìì—ê²Œ ì „ë‹¬ë˜ê³  bê°€ ë°©ì¶œí•˜ëŠ” í•­ëª©ì€ ë‹¤ì‹œ ë¬´ì‹œë¨

# scan<a id="scan"></a>

- ê¸°ë³¸ ê°’ìœ¼ë¡œ ì—°ì‚°ì„ ì‹œì‘
- ì›ë³¸ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ ëŒ€ìƒìœ¼ë¡œ ë³€í™˜ì„ ì‹¤í–‰í•œ ë‹¤ìŒ ê²°ê³¼ë¥¼ ë°©ì¶œí•˜ëŠ” í•˜ë‚˜ì˜ Observableì„ ë¦¬í„´í•¨
- ê·¸ë˜ì„œ ì›ë³¸ì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì˜ ìˆ˜ì™€ êµ¬ë…ìë¡œ ì „ë‹¬ë˜ëŠ” í•­ëª©ì˜ ìˆ˜ê°€ ë™ì¼í•¨

<br/>

```swift
func scan<A>(_ seed: A, accumulator: @escaping (A, Element) throws -> A) -> Observable<A>
```

- ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ê¸°ë³¸ê°’ì„ ì „ë‹¬ (ì•„ë˜ ì½”ë“œì—ì„œëŠ” 0ì„ ì „ë‹¬)
- ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” í´ë¡œì €ë¥¼ ì „ë‹¬
    - í´ë¡œì €ì˜ íŒŒë¼ë¯¸í„°ëŠ” 2ê°œ
    - ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” ê¸°ë³¸ê°’ í˜•ì‹ê³¼ ê°™ê³  ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì˜ í˜•ì‹ê³¼ ê°™ìŒ
    - í´ë¡œì €ì˜ ë¦¬í„´í˜•ì€ ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì™€ ê°™ìŒ
    - scan ì—°ì‚°ìë¡œ ì „ë‹¬í•˜ëŠ” í´ë¡œì €ëŠ” `Accumulator Function` ë˜ëŠ” `Accumulator Closure`ë¼ê³  ë¶€ë¦„
- `ê¸°ë³¸ê°’ì´ë‚˜ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ ëŒ€ìƒìœ¼ë¡œ Accumulator Closureë¥¼ ì‹¤í–‰í•œ ë‹¤ìŒ ê²°ê³¼ë¥¼ Observableë¡œ ë¦¬í„´í•¨`
- `í´ë¡œì €ê°€ ë¦¬í„´í•œ ê°’ì€ ì´ì–´ì„œ ì‹¤í–‰ë˜ëŠ” í´ë¡œì €ì˜ ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë¨`

<br/>

```swift
Observable.range(start: 1, count: 10)
    .scan(0, accumulator: +)
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³ 
//next(1)
//next(3)
//next(6)
//next(10)
//next(15)
//next(21)
//next(28)
//next(36)
//next(45)
//next(55)
//completed
```

- Observableì´ 1ì„ ë°©ì¶œí•˜ë©´ í´ë¡œì €ë¡œ ê¸°ë³¸ê°’ 0ê³¼ 1ì´ ì „ë‹¬ë˜ê³  ë‘ ìˆ˜ë¥¼ í•©í•œ ê°’ì´ ë¦¬í„´ë¨
    - ê²°ê³¼ì ìœ¼ë¡œ êµ¬ë…ìì—ê²ŒëŠ” 1ì´ ì „ë‹¬ë¨
- Observableì´ ë‹¤ì‹œ 2ë¥¼ ë°©ì¶œí•˜ë©´ ì´ì „ ê²°ê³¼ì¸ 1ê³¼ ìƒˆë¡œ ë°©ì¶œëœ 2ê°€ í´ë¡œì €ë¡œ ì „ë‹¬ë¨
    - ì´ë²ˆì—ëŠ” êµ¬ë…ìì—ê²Œ 3ì´ ì „ë‹¬ë¨
- Observableì´ ëª¨ë“  í•­ëª©ì„ ë°©ì¶œí•  ë•Œê¹Œì§€ ê³„ì† ëˆ„ì ëœ ê°’ì„ ì „ë‹¬í•¨
- ì´ ì—°ì‚°ìëŠ” `ì‘ì—… ê²°ê³¼ë¥¼ ëˆ„ì ì‹œí‚¤ë©´ì„œ ì¤‘ê°„ ê²°ê³¼ì™€ ìµœì¢… ê²°ê³¼ê°€ ëª¨ë‘ í•„ìš”í•œ ê²½ìš°ì— ì‚¬ìš©í•¨`
- ìœ„ ì½”ë“œì—ì„œëŠ” ìµœì¢…ì ìœ¼ë¡œ 1ì—ì„œ 10ê¹Œì§€ì˜ í•©ì´ ì „ë‹¬ë˜ëŠ”ë° ì´ ê°’ë§Œ í•„ìš”í•˜ë‹¤ë©´ `reduce` ì—°ì‚°ìë¥¼ ì‚¬ìš©

# buffer<a id="buffer"></a>

- `íŠ¹ì • ì£¼ê¸° ë™ì•ˆ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ì„ ìˆ˜ì§‘í•˜ê³  í•˜ë‚˜ì˜ ë°°ì—´ë¡œ ë¦¬í„´í•¨`
- RxSwiftì—ì„œëŠ” ì´ëŸ° ë™ì‘ì„ `Controlled Buffering` ì´ë¼ê³  í•¨

```swift
func buffer(timeSpan: RxTimeInterval, count: Int, scheduler: SchedulerType) -> Observable<[Element]>
// parameter timeSpan: Maximum time length of a buffer.
// parameter count: Maximum element count of a buffer.
// parameter scheduler: Scheduler to run buffering timers on.
// returns: An observable sequence of buffers.
```

- 3ê°œì˜ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ìŒ
- ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” í•­ëª©ì„ `ìˆ˜ì§‘í•  ì‹œê°„`
    - íƒ€ì…ì€ RxTimeIntervalì¸ë° ì´ í˜•ì‹ì€ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í˜•ì‹ì´ë¼ ëŒ€ë¶€ë¶„ `DispatchTimeInterval` í˜•ì‹ìœ¼ë¡œ ì‹œê°„ ì§€ì •
    - ì—¬ê¸°ì—ì„œ ì§€ì •í•œ ì‹œê°„ë§ˆë‹¤ ìˆ˜ì§‘ë˜ì–´ ìˆëŠ” í•­ëª©ë“¤ì„ ë°°ì¶œí•˜ëŠ”ë° ì‹œê°„ì´ ê²½ê³¼í•˜ì§€ ì•Šì€ ê²½ìš°ì—ë„ í•­ëª©ì„ ë°©ì¶œí•  ìˆ˜ ìˆìŒ
- ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” `ìˆ˜ì§‘í•  í•­ëª©ì˜ ìˆ«ì`
    - ì •í™•í•œ ìˆ«ìê°€ ì•„ë‹ˆë¼ ìµœëŒ€ ìˆ«ìì„
    - ìµœëŒ€ ìˆ«ìë³´ë‹¤ ì ì€ í•­ëª©ì„ ìˆ˜ì§‘í–ˆë”ë¼ë„ ì‹œê°„ì´ ê²½ê³¼í•˜ë©´ ìˆ˜ì§‘ëœ í•­ëª©ë§Œ ë°©ì¶œ
    - ê·¸ë˜ì„œ countê°€ ì•„ë‹ˆë¼ `Maximum element count`
- ì„¸ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ëŠ” `ìŠ¤ì¼€ì¤„ëŸ¬`
- ì—°ì‚°ìì˜ ë¦¬í„´í˜•ì„ ë³´ë©´ íƒ€ì… íŒŒë¼ë¯¸í„°ê°€ ë°°ì—´í˜•ìœ¼ë¡œ ì„ ì–¸ë˜ì–´ìˆìŒ
    - `ì§€ì •ëœ ì‹œê°„ ë™ì•ˆ ìˆ˜ì§‘í•œ í•­ëª©ë“¤ì„ ë°°ì—´ì— ë‹´ì•„ì„œ ë¦¬í„´í•¨`

<br/>

1ì´ˆ ë§ˆë‹¤ ì •ìˆ˜ë¥¼ ë°©ì¶œí•˜ëŠ” Observable

```swift
Observable<Int>.interval(.seconds(1), scheduler: MainScheduler.instance)
    .buffer(timeSpan: .seconds(2), count: 3, scheduler: MainScheduler.instance)
    .take(5)
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next([0])
//next([1, 2, 3])
//next([4, 5])
//next([6, 7])
//next([8, 9])
//completed
```

- í•­ëª©ì´ ë¬´í•œì •ìœ¼ë¡œ ë°©ì¶œë˜ê¸° ë•Œë¬¸ì— take ì—°ì‚°ìë¡œ 5ê°œë§Œ ë°©ì¶œì‹œí‚¤ê³  ì¤‘ì§€í•˜ê²Œ í•¨
- Observableì€ 1ì´ˆë§ˆë‹¤ í•­ëª©ì„ ë°©ì¶œí•˜ê³  ìˆê³  buffer ì—°ì‚°ìëŠ” 2ì´ˆë§ˆë‹¤ 3ê°œì”© ìˆ˜ì§‘í•˜ê³  ìˆìŒ
    - buffer ì—°ì‚°ìëŠ” `ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•œ timeSpanì´ ê²½ê³¼í•˜ë©´ ìˆ˜ì§‘ëœ í•­ëª©ë“¤ì„ ì¦‰ì‹œ ë°©ì¶œí•¨`
    - `ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì§€ì •í•œ ìˆ˜ë§Œí¼ ìˆ˜ì§‘ë˜ì§€ ì•Šì•˜ë”ë¼ë„ ì¦‰ì‹œ ë°©ì¶œí•¨`
- ìœ„ ì½”ë“œì—ì„œëŠ” 2ì´ˆë§ˆë‹¤ ìˆ˜ì§‘í•˜ê³  ìˆìœ¼ë‹ˆê¹Œ ë°©ì¶œë˜ëŠ” ë°°ì—´ì—ëŠ” ë³´í†µ 2ê°œì˜ ìš”ì†Œê°€ í¬í•¨ë˜ì–´ ìˆìŒ
- í•˜ì§€ë§Œ ì‹œê°„ ìƒì˜ ì˜¤ì°¨ë¡œ ì¸í•´ì„œ ì²« ë²ˆì§¸ ë°°ì—´ì²˜ëŸ¼ 1ê°œê°€ í¬í•¨ë˜ì–´ ìˆëŠ” ê²½ìš°ë„ ìˆê³  ë‘ ë²ˆì§¸ ë°°ì—´ì²˜ëŸ¼ 3ê°œê°€ í¬í•¨ë˜ì–´ ìˆëŠ” ê²½ìš°ë„ ìˆìŒ

<br/>

ì‹œê°„ì„ 5ì´ˆë¡œ ìˆ˜ì •

```swift
Observable<Int>.interval(.seconds(1), scheduler: MainScheduler.instance)
    .buffer(timeSpan: .seconds(5), count: 3, scheduler: MainScheduler.instance)
    .take(5)
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next([0, 1, 2])
//next([3, 4, 5])
//next([6, 7, 8])
//next([9, 10, 11])
//next([12, 13, 14])
//completed
```

- ì´ë²ˆì—ëŠ” 5ì´ˆê°€ ê²½ê³¼í•˜ê¸° ì „ì— 3ê°œê°€ ìˆ˜ì§‘ë¨
- `ì´ ë•ŒëŠ” timeSpanì´ ê²½ê³¼í•˜ì§€ ì•Šì•˜ë”ë¼ë„ ìˆ˜ì§‘ëœ í•­ëª©ì„ ì¦‰ì‹œ ë°©ì¶œí•¨`
- ê·¸ë˜ì„œ ê²°ê³¼ì²˜ëŸ¼ ëŒ€ëµ 3ì´ˆë§ˆë‹¤ 3ê°œì˜ ìš”ì†Œê°€ í¬í•¨ëœ ë°°ì—´ì„ ë°©ì¶œí•¨

# window<a id="window"></a>

- buffer ì—°ì‚°ìì²˜ëŸ¼ timeSpanê³¼ maxCountë¥¼ ì§€ì •í•´ì„œ ì›ë³¸ Observableì´ ë°©ì¶œí•˜ëŠ” í•­ëª©ë“¤ì„ ì‘ì€ ë‹¨ìœ„ì˜ Observableë¡œ ë¶„í•´í•¨
- buffer ì—°ì‚°ìëŠ” ìˆ˜ì§‘ëœ í•­ëª©ì„ ë°°ì—´ì˜ í˜•íƒœë¡œ ë¦¬í„´í•˜ì§€ë§Œ window ì—°ì‚°ìëŠ” `ìˆ˜ì§‘ëœ í•­ëª©ì„ ë°©ì¶œí•˜ëŠ” Observableì„ ë¦¬í„´í•¨`
â†’ ë¦¬í„´ëœ Observableì´ ë¬´ì—‡ì„ ë°©ì¶œí•˜ê³  ì–¸ì œ ì™„ë£Œë˜ëŠ”ì§€ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•¨

```swift
func window(timeSpan: RxTimeInterval, count: Int, scheduler: SchedulerType) -> Observable<Observable<Element>>

// parameter timeSpan: Maximum time length of a window.
// parameter count: Maximum element count of a window.
// parameter scheduler: Scheduler to run windowing timers on.
// returns: An observable sequence of windows (instances of `Observable`).
```

- íŒŒë¼ë¯¸í„°ëŠ” buffer ì—°ì‚°ìì™€ ë™ì¼
    - ì²« ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” í•­ëª©ì„ ë¶„í•´í•  ì‹œê°„ ë‹¨ìœ„ë¥¼ ì „ë‹¬
    - ë‘ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” ë¶„í•´í•  ìµœëŒ€ í•­ëª© ìˆ˜ë¥¼ ì „ë‹¬
    - ì„¸ ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” ì—°ì‚°ìë¥¼ ì‹¤í–‰í•  ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ì „ë‹¬
- buffer ì—°ì‚°ìì™€ì˜ ì°¨ì´ëŠ” ë¦¬í„´í˜•ì— ìˆìŒ
    - `buffer ì—°ì‚°ìëŠ” ìˆ˜ì§‘ëœ ë°°ì—´ì„ ë°©ì¶œí•˜ëŠ” Observableì„ ë¦¬í„´í•¨`
    - `window ì—°ì‚°ìëŠ” Observableì„ ë°©ì¶œí•˜ëŠ” Observableì„ ë¦¬í„´í•¨`
        - ì´ë ‡ê²Œ Observableì´ ë°©ì¶œí•˜ëŠ” Observableì„ `Inner Observable` ì´ë¼ê³  í•¨
        - Inner Observableì€ `ì§€ì •ëœ ìµœëŒ€ í•­ëª© ìˆ˜ë§Œí¼ ë°©ì¶œí•˜ê±°ë‚˜ ì§€ì •ëœ ì‹œê°„ì´ ê²½ê³¼í•˜ë©´ completed ì´ë²¤íŠ¸ë¥¼ ì „ë‹¬í•˜ê³  ì¢…ë£Œí•¨`

<br/>

1ì´ˆë§ˆë‹¤ ì •ìˆ˜ë¥¼ ë°©ì¶œí•˜ëŠ” Observable

```swift
Observable<Int>.interval(.seconds(1), scheduler: MainScheduler.instance)
    .window(timeSpan: .seconds(2), count: 3, scheduler: MainScheduler.instance)
    .take(5)
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next(RxSwift.AddRef<Swift.Int>)
//next(RxSwift.AddRef<Swift.Int>)
//next(RxSwift.AddRef<Swift.Int>)
//next(RxSwift.AddRef<Swift.Int>)
//next(RxSwift.AddRef<Swift.Int>)
//completed
```

- 2ì´ˆë§ˆë‹¤ ìµœëŒ€ 3ê°œì˜ í•­ëª©ì„ ìˆ˜ì§‘í•˜ê²Œ íŒŒë¼ë¯¸í„° ì „ë‹¬
- take ì—°ì‚°ìë¡œ ì „ë‹¬ë˜ëŠ” ê²°ê³¼ë¥¼ 5ê°œë¡œ ì œí•œ
- ê²°ê³¼ë¥¼ ë³´ë©´ 2ì´ˆë§ˆë‹¤ í•­ëª©ì´ ë°©ì¶œë¨
- AddRefëŠ” `Inner Observable`
    - AddRefì— ëŒ€í•´ì„œ êµ¬ì²´ì ìœ¼ë¡œ ê³µë¶€í•  í•„ìš”ëŠ” ì—†ìŒ
    - `Observableì´ê³  êµ¬ë…í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ`ìœ¼ë¡œ ì´í•´í•˜ë©´ ì¶©ë¶„í•¨

<br/>

next ì´ë²¤íŠ¸ê°€ ì „ë‹¬ë˜ë©´ element ì†ì„±ì„ í†µí•´ì„œ Inner Observableì— ì ‘ê·¼

```swift
Observable<Int>.interval(.seconds(1), scheduler: MainScheduler.instance)
    .window(timeSpan: .seconds(2), count: 3, scheduler: MainScheduler.instance)
    .take(5)
    .subscribe {
        print($0)

        if let observable = $0.element {
            observable.subscribe { print(" inner: ", $0) }
        }
    }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(0)
// inner:  completed
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(1)
// inner:  next(2)
// inner:  next(3)
// inner:  completed
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(4)
// inner:  next(5)
// inner:  completed
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(6)
// inner:  next(7)
// inner:  completed
//next(RxSwift.AddRef<Swift.Int>)
//completed
// inner:  next(8)
// inner:  next(9)
// inner:  completed
```

- ì›ë³¸ Observableì€ 1ì´ˆë§ˆë‹¤ í•˜ë‚˜ì”© ë°©ì¶œí•˜ê³  ìˆê³  window ì—°ì‚°ìëŠ” 2ì´ˆë§ˆë‹¤ 3ê°œì”© ìˆ˜ì§‘í•˜ê³  ìˆìŒ
- ê²°ê³¼ì ìœ¼ë¡œ maxCountëŠ” ì±„ìš°ì§€ ëª»í•¨
- ì¶œë ¥ ê²°ê³¼ë¥¼ ë³´ë©´ maxCountê°€ ì±„ì›Œì§ˆë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  2ì´ˆ ë™ì•ˆ í•­ëª©ì„ ë°©ì¶œí•œ ë‹¤ìŒ ë°”ë¡œ ì¢…ë£Œí•¨
- ê·¸ë¦¬ê³  ì´ ì—°ì‚°ìë„ buffer ì—°ì‚°ìì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì‹œê°„ì˜ ì˜¤ì°¨ë¡œ ì¸í•´ì„œ ì•„ë˜ì˜ ê²°ê³¼ê°€ ë‚˜ì˜¤ê¸°ë„ í•¨

```swift
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(0)
// inner:  completed
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(1)
// inner:  next(2)
// inner:  next(3)
// inner:  completed
```

<br/>

5ì´ˆë§ˆë‹¤ 3ê°œì˜ í•­ëª©ì„ ìˆ˜ì§‘í•˜ëŠ” ì½”ë“œ

```swift
Observable<Int>.interval(.seconds(1), scheduler: MainScheduler.instance)
    .window(timeSpan: .seconds(5), count: 3, scheduler: MainScheduler.instance)
    .take(5)
    .subscribe {
        print($0)
        
        if let observable = $0.element {
            observable.subscribe { print(" inner: ", $0) }
        }
    }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(0)
// inner:  next(1)
// inner:  next(2)
// inner:  completed
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(3)
// inner:  next(4)
// inner:  next(5)
// inner:  completed
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(6)
// inner:  next(7)
// inner:  next(8)
// inner:  completed
//next(RxSwift.AddRef<Swift.Int>)
// inner:  next(9)
// inner:  next(10)
// inner:  next(11)
// inner:  completed
//next(RxSwift.AddRef<Swift.Int>)
//completed
// inner:  next(12)
// inner:  next(13)
// inner:  next(14)
// inner:  completed
```

- ê²°ê³¼ë¥¼ ë³´ë©´ Inner Observableì´ 3ê°œì˜ í•­ëª©ì„ ë°°ì¶œí•œ ë‹¤ìŒ ë°”ë¡œ ì¢…ë£Œë¨
- 5ì´ˆê°€ ê²½ê³¼í•˜ì§€ ì•Šì•˜ì§€ë§Œ maxCountë¡œ ì§€ì •ëœ ìˆ˜ë§Œí¼ í•­ëª©ì„ ë°°ì¶œí–ˆê¸° ë•Œë¬¸

# groupBy<a id="groupBy"></a>

Observableì´ ë°©ì¶œí•˜ëŠ” ìš”ì†Œë¥¼ `ì›í•˜ëŠ” ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¨í•‘`í•  ë•Œ ì‚¬ìš©í•¨

```swift
func groupBy<Key: Hashable>(keySelector: @escaping (Element) throws -> Key) -> Observable<GroupedObservable<Key, Element>>
```

- íŒŒë¼ë¯¸í„°ë¡œ í´ë¡œì €ë¥¼ ë°›ê³  í´ë¡œì €ëŠ” ìš”ì†Œë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì„œ Keyë¥¼ ë¦¬í„´
- Keyì˜ í˜•ì‹ì€ `Hashable` í”„ë¡œí† ì½œì„ ì°¨ìš©í•œ í˜•ì‹ìœ¼ë¡œ í•œì •ë˜ì–´ ìˆìŒ
- ì—°ì‚°ìë¥¼ ì‹¤í–‰í•˜ë©´ `í´ë¡œì €ì—ì„œ ë™ì¼í•œ ê°’ì„ ë¦¬í„´í•˜ëŠ” ìš”ì†Œë¼ë¦¬ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì´ê³  ê·¸ë£¹ì— ì†í•œ ìš”ì†Œë“¤ì€ ê°œë³„ Observableì„ í†µí•´ ë°©ì¶œë¨`
- ì—°ì‚°ìê°€ ë¦¬í„´í•˜ëŠ” Observableì„ ë³´ë©´ íƒ€ì… íŒŒë¼ë¯¸í„°ê°€ `GroupedObservable`ë¡œ ì„ ì–¸ë˜ì–´ ìˆìŒ
    - ì—¬ê¸°ì—ëŠ” `ë°©ì¶œí•˜ëŠ” ìš”ì†Œì™€ í•¨ê»˜ Keyê°€ ì €ì¥`ë˜ì–´ ìˆìŒ

<br/>

```swift
let words = ["Apple", "Banana", "Orange", "Book", "City", "Axe"]

Observable.from(words)
    .groupBy { $0.count }
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next(GroupedObservable<Int, String>(key: 5, source: RxSwift.(unknown context at $108f859e8).GroupedObservableImpl<Swift.String>))
//next(GroupedObservable<Int, String>(key: 6, source: RxSwift.(unknown context at $108f859e8).GroupedObservableImpl<Swift.String>))
//next(GroupedObservable<Int, String>(key: 4, source: RxSwift.(unknown context at $108f859e8).GroupedObservableImpl<Swift.String>))
//next(GroupedObservable<Int, String>(key: 3, source: RxSwift.(unknown context at $108f859e8).GroupedObservableImpl<Swift.String>))
//completed
```

- groupBy ì—°ì‚°ì íŒŒë¼ë¯¸í„°ì˜ `í´ë¡œì €ì—ì„œ ë¬¸ìì—´ì˜ ê¸¸ì´ë¥¼ ë¦¬í„´í•˜ë©´ Keyì˜ í˜•ì‹ì€ Intê°€ ë¨`
â†’ ê·¸ë¦¬ê³  `ë¬¸ìì—´ì˜ ê¸¸ì´ì— ë”°ë¼ì„œ ê·¸ë£¨í•‘`
- Stringì´ ë°©ì¶œë˜ì§€ ì•Šê³  ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì¸ ë¬¸ìì—´ì„ ë°©ì¶œí•˜ëŠ” Observableì´ ë°©ì¶œë¨
    - GroupedObservableì´ê³  keyê°€ í•¨ê»˜ ì €ì¥ë˜ì–´ ìˆìŒ
    - ë¬¸ìì—´ ê¸¸ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¨í•‘ì„ í–ˆì„ ë•Œ 4ê°œì˜ ê·¸ë£¹ì´ ë‚˜ì™”ê¸° ë•Œë¬¸ì— 4ê°œì˜ Observableì´ ë°©ì¶œë¨

<br/>

Keyì™€ ê·¸ë£¹ì„ í•¨ê»˜ ì¶œë ¥í•˜ëŠ” ì½”ë“œ

```swift
Observable.from(words)
    .groupBy { $0.count }
    .subscribe(onNext: { groupedObservable in

        // Keyì— ì €ì¥ë˜ì–´ ìˆëŠ” ê°’ì€ key ì†ì„±ì„ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŒ
        print("== \(groupedObservable.key)")

        // Inner Observableì˜ êµ¬ë…ì ì¶”ê°€
        groupedObservable.subscribe { print(" \($0)") }
    })
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//    == 5
//     next(Apple)
//    == 6
//     next(Banana)
//     next(Orange)
//    == 4
//     next(Book)
//     next(City)
//    == 3
//     next(Axe)
//     completed
//     completed
//     completed
//     completed
```

- keyì™€ í•¨ê»˜ Inner Observableì´ ë°©ì¶œí•˜ëŠ” ìš”ì†Œë“¤ì´ ì¶œë ¥ë¨

<br/>

```swift
Observable.from(words)
    .groupBy { $0.count }
    .flatMap { $0.toArray() }
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next(["Banana", "Orange"])
//next(["Book", "City"])
//next(["Axe"])
//next(["Apple"])
//completed
```

- groupBy ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ë³´í†µ `flatMap` ì—°ì‚°ìì™€ `toArray` ì—°ì‚°ìë¥¼ í™œìš©í•´ì„œ ê·¸ë£¨í•‘ëœ ìµœì¢… ê²°ê³¼ë¥¼ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ ë°©ì¶œí•˜ë„ë¡ êµ¬í˜„í•¨
- ë¬¸ìì—´ ê¸¸ì´ë¡œ ê·¸ë£¨í•‘ëœ 4ê°œì˜ ë°°ì—´ì´ ë°©ì¶œë¨

<br/>

ì²« ë²ˆì§¸ ë¬¸ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¨í•‘

```swift
Observable.from(words)
    .groupBy { $0.first ?? Character(" ") }
    .flatMap { $0.toArray() }
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next(["Apple", "Axe"])
//next(["Orange"])
//next(["Banana", "Book"])
//next(["City"])
//completed
```

- í´ë¡œì €ì—ì„œ ì²« ë²ˆì§¸ ë¬¸ìë¥¼ ë¦¬í„´í•´ì£¼ë©´ ë¨

<br/>

í™€ìˆ˜ì™€ ì§ìˆ˜ë¡œ ê·¸ë£¨í•‘

```swift
Observable.range(start: 1, count: 10)
    .groupBy { $0.isMultiple(of: 2) }
    .flatMap { $0.toArray() }
    .subscribe { print($0) }
    .disposed(by: disposeBag)
// ì¶œë ¥ ê²°ê³¼
//next([1, 3, 5, 7, 9])
//next([2, 4, 6, 8, 10])
//completed
```
